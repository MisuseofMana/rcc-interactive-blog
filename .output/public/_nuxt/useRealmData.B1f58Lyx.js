import{u as l}from"./useSiteStore.DpxSRdPB.js";import{ch as P,r as o,ci as b,d as k,cl as w,ak as m,am as A,an as I,ao as v,ck as C,cj as p}from"./entry.BEHNrUNK.js";const j=P({apiKey:"AIzaSyBveK6gIB_9MdjUlyi70KOyCo-dMO2yKHY",authDomain:"crickburrowarchives.firebaseapp.com",projectId:"crickburrowarchives",storageBucket:"crickburrowarchives.appspot.com",messagingSenderId:"708349315619",appId:"1:708349315619:web:5a599bfa7961f0bf217f96",measurementId:"G-CLXB8V1MH8"}),i=o({}),u=o(""),h=o([]),g=o(""),c=o([]),q=o(""),f=o([]),D=o(""),d=b(j),y=a=>{l().$patch({currentSound:a})};async function L(a,t){const s=l(),e=k(d,"realms",a);if(Object.keys(s==null?void 0:s.realmData).includes(a)){if(i.value=s.realmData[a],t!=null&&t.noMusic)return;y(s.realmData[a].audioLink);return}try{const r=await w(e);if(r.exists()){if(i.value={...r.data(),realmSigil:r.data().sigilImageLink?[new File([r.data().sigilImageLink],`${r.data().slug}.png`)]:null,realmAudio:r.data().audioLink?[new File([r.data().audioLink],`${r.data().slug}.mp3`)]:null},s.realmData[a]=i.value,t!=null&&t.noMusic)return;y(i.value.audioLink)}}catch(r){r&&(u.value=u)}}async function R(){const a=l(),t=m(I(d,"photographs"),A("useAsCoverImage","==",!0));try{if(Object.entries(a==null?void 0:a.realmCoverPhotos).length){h.value=Object.values(a==null?void 0:a.realmCoverPhotos);return}(await v(t)).forEach(e=>{const{realmId:r,imageLink:n}=e.data();h.value.push({realmId:r,imageLink:n})}),a.realmCoverPhotos={...h.value}}catch(s){s&&(u.value=u)}}async function E(a){const t=l(),s=m(p(d,"realms",a,"photographs"),C("order"));if(Object.keys(t==null?void 0:t.realmPhotosData).includes(a)){c.value=t.realmPhotosData[a];return}try{const e=await v(s);c.value=[],e.forEach(r=>{const n=r.data();c.value.push({...n,id:r.id})}),t.realmPhotosData[a]=c.value}catch(e){e&&(console.log(e),g.value=e)}}async function O(a){const t=l(),s=m(p(d,"realms",a,"artifacts"));if(Object.keys(t==null?void 0:t.realmArtifacts).includes(a)){f.value=t.realmArtifacts[a];return}try{const e=v(s);f.value=[],e.forEach(r=>{const n=r.data();f.value.push({...n,id:r.id})}),t.realmArtifacts[a]=c.value}catch(e){e&&(console.log(e),D.value=e)}}async function B(a,t={noMusic:!1}){return await L(a,t),{realmData:i,realmError:u}}async function K(){return await R(),{coverPhotosData:h,coverPhotosError:g}}async function x(a){return await E(a),{realmPhotosData:c,realmPhotosError:q}}async function $(a){return await O(a),{artifactsData:f,artifactsError:D}}export{$ as a,x as b,K as c,B as u};
