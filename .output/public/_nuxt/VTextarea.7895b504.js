import{h as W,i as X,j as Y,k as Z,l as ee,o as te,p as le,f as ae,q as se}from"./VTextField.35c3bfec.js";import{B as ne,ac as ce,E as de,a7 as oe,j as m,au as K,r as h,O as S,ab as ue,a,J as b,F as w,av as J,R as L,e as ve,x as fe,z as Q,a4 as me,aw as ge,ae as he,ao as xe}from"./entry.c9a1c00a.js";import{V as ye}from"./VChip.f68cb0e0.js";import{u as ie}from"./useRender.0a1b1031.js";import{I as Ce}from"./VImg.a6597b63.js";const Se=ne({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...W({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ce(e).every(k=>k!=null&&typeof k=="object")},...X({clearable:!0})},emits:{"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:P,emit:G,slots:o}=k;const{t:i}=de(),u=oe(e,"modelValue"),_=m(()=>typeof e.showSize!="boolean"?e.showSize:void 0),A=m(()=>(u.value??[]).reduce((t,n)=>{let{size:s=0}=n;return t+s},0)),H=m(()=>K(A.value,_.value)),R=m(()=>(u.value??[]).map(t=>{const{name:n="",size:s=0}=t;return e.showSize?`${n} (${K(s,_.value)})`:n})),U=m(()=>{var t;const n=((t=u.value)==null?void 0:t.length)??0;return e.showSize?i(e.counterSizeString,n,H.value):i(e.counterString,n)}),B=h(),C=h(),g=h(!1),r=h(),N=m(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function z(){if(r.value!==document.activeElement){var t;(t=r.value)==null||t.focus()}g.value||(g.value=!0)}function $(t){J(e["onClick:prepend"],t),D(t)}function D(t){var n;(n=r.value)==null||n.click(),G("click:control",t)}function j(t){t.stopPropagation(),z(),L(()=>{u.value=[],J(e["onClick:clear"],t)})}return S(u,t=>{(!Array.isArray(t)||!t.length)&&r.value&&(r.value.value="")}),ie(()=>{const t=!!(o.counter||e.counter),n=!!(t||o.details),[s,p]=ue(P),[{modelValue:l,...d}]=Y(e),[v]=Z(e);return a(le,b({ref:B,modelValue:u.value,"onUpdate:modelValue":c=>u.value=c,class:"v-file-input","onClick:prepend":$,"onClick:append":e["onClick:append"]},s,d,{focused:g.value,messages:N.value}),{...o,default:c=>{let{id:x,isDisabled:y,isDirty:I,isReadonly:V,isValid:F}=c;return a(ee,b({ref:C,"prepend-icon":e.prependIcon,"onClick:control":D,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},v,{id:x.value,active:I.value||g.value,dirty:I.value,focused:g.value,error:F.value===!1}),{...o,default:M=>{var T;let{props:{class:E,...O}}=M;return a(w,null,[a("input",b({ref:r,type:"file",readonly:V.value,disabled:y.value,multiple:e.multiple,name:e.name,onClick:f=>{f.stopPropagation(),z()},onChange:f=>{if(!f.target)return;const q=f.target;u.value=[...q.files??[]]},onFocus:z,onBlur:()=>g.value=!1},O,p),null),a("div",{class:E},[!!((T=u.value)!=null&&T.length)&&(o.selection?o.selection({fileNames:R.value,totalBytes:A.value,totalBytesReadable:H.value}):e.chips?R.value.map(f=>a(ye,{key:f,size:"small",color:e.color},{default:()=>[f]})):R.value.join(", "))])])}})},details:n?c=>{var x,y;return a(w,null,[(x=o.details)==null?void 0:x.call(o,c),t&&a(w,null,[a("span",null,null),a(te,{active:!!((y=u.value)!=null&&y.length),value:U.value},o.counter)])])}:void 0})}),ae({},B,C,r)}});const be=ne({name:"VTextarea",directives:{Intersect:Ce},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...W(),...X()},emits:{"click:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,k){let{attrs:P,emit:G,slots:o}=k;const i=oe(e,"modelValue"),{isFocused:u,focus:_,blur:A}=se(e),H=m(()=>typeof e.counterValue=="function"?e.counterValue(i.value):(i.value||"").toString().length),R=m(()=>{if(P.maxlength)return P.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function U(l,d){var v,c;!e.autofocus||!l||(v=d[0].target)==null||(c=v.focus)==null||c.call(v)}const B=h(),C=h(),g=h(""),r=h(),N=m(()=>u.value||e.persistentPlaceholder),z=m(()=>e.messages.length?e.messages:N.value||e.persistentHint?e.hint:"");function $(){if(r.value!==document.activeElement){var l;(l=r.value)==null||l.focus()}u.value||_()}function D(l){$(),G("click:control",l)}function j(l){l.stopPropagation(),$(),L(()=>{i.value="",J(e["onClick:clear"],l)})}function t(l){i.value=l.target.value}const n=h();function s(){e.autoGrow&&L(()=>{if(!n.value||!C.value)return;const l=getComputedStyle(n.value),d=getComputedStyle(C.value.$el),v=parseFloat(l.getPropertyValue("--v-field-padding-top"))+parseFloat(l.getPropertyValue("--v-input-padding-top"))+parseFloat(l.getPropertyValue("--v-field-padding-bottom")),c=n.value.scrollHeight,x=parseFloat(l.lineHeight),y=Math.max(parseFloat(e.rows)*x+v,parseFloat(d.getPropertyValue("--v-input-control-height"))),I=parseFloat(e.maxRows)*x+v||1/0;g.value=he(xe(c??0,y,I))})}ve(s),S(i,s),S(()=>e.rows,s),S(()=>e.maxRows,s),S(()=>e.density,s);let p;return S(n,l=>{if(l)p=new ResizeObserver(s),p.observe(n.value);else{var d;(d=p)==null||d.disconnect()}}),fe(()=>{var l;(l=p)==null||l.disconnect()}),ie(()=>{const l=!!(o.counter||e.counter||e.counterValue),d=!!(l||o.details),[v,c]=ue(P),[{modelValue:x,...y}]=Y(e),[I]=Z(e);return a(le,b({ref:B,modelValue:i.value,"onUpdate:modelValue":V=>i.value=V,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)}],"onClick:prepend":e["onClick:prepend"],"onClick:append":e["onClick:append"]},v,y,{focused:u.value,messages:z.value}),{...o,default:V=>{let{isDisabled:F,isDirty:M,isReadonly:T,isValid:E}=V;return a(ee,b({ref:C,style:{"--v-textarea-control-height":g.value},"onClick:control":D,"onClick:clear":j,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},I,{active:N.value||M.value,dirty:M.value||e.dirty,focused:u.value,error:E.value===!1}),{...o,default:O=>{let{props:{class:f,...q}}=O;return a(w,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),Q(a("textarea",b({ref:r,class:f,value:i.value,onInput:t,autofocus:e.autofocus,readonly:T.value,disabled:F.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:$,onBlur:A},q,c),null),[[me("intersect"),{handler:U},null,{once:!0}]]),e.autoGrow&&Q(a("textarea",{class:[f,"v-textarea__sizer"],"onUpdate:modelValue":re=>i.value=re,ref:n,readonly:!0,"aria-hidden":"true"},null),[[ge,i.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:d?V=>{var F;return a(w,null,[(F=o.details)==null?void 0:F.call(o,V),l&&a(w,null,[a("span",null,null),a(te,{active:e.persistentCounter||u.value,value:H.value,max:R.value},o.counter)])])}:void 0})}),ae({},B,C,r)}});export{be as V,Se as a};
