import{_ as G}from"./backButton.b4a42b8e.js";import W from"./CBToggleSwitch.58227a55.js";import Y from"./CBTextArea.9d340382.js";import{_ as Z}from"./layout.11a375a8.js";import{_ as q,E as J,m as K,r as R,k as Q,Y as ee,ai as ae,o as m,c,w as l,a,g as v,b as le,h as se,u as p,F as te,a5 as re,an as ie,z as N,n as oe,e as d,t as g,C as ne,d as $,D as me,p as ce,i as ue,Z as de}from"./entry.94ffdeeb.js";import{u as ve,a as pe}from"./useSiteStore.7e6abfbd.js";import{b as _e}from"./useRealmData.f000b3e2.js";import{a as u,V as A}from"./VRow.874663fa.js";import{V as M}from"./VCard.9eec5110.js";import{V as S}from"./VBtn.d2531af0.js";import{V as w}from"./VIcon.a89c1bf3.js";import{V as U}from"./VChip.c096698a.js";import{V as fe}from"./VImg.9336a433.js";import"./VSelectionControl.dc270e61.js";import"./density.5a2b29f1.js";import"./useRender.ee02d324.js";import"./index.5bd91e98.js";import"./color.08edc865.js";import"./VInput.6e31d692.js";import"./index.108b6c93.js";import"./transition.7408c173.js";import"./loader.0e188cc9.js";import"./VProgressLinear.7e39016e.js";import"./rounded.a3340ae4.js";import"./tag.6e0eec08.js";import"./VProgressCircular.6669da86.js";import"./resizeObserver.16ca977f.js";/* empty css                   */import"./forwardRefs.14bdb9d9.js";import"./index.66b8fb70.js";import"./createSimpleFunctional.433ad74c.js";import"./router.12029284.js";import"./VAvatar.7d2681a0.js";import"./dimensions.2a8a239a.js";import"./position.048a6b63.js";import"./group.e7d6c6fc.js";const L=x=>(ce("data-v-6d3a207c"),x=x(),ue(),x),ge=L(()=>d("h4",{class:"text-h4 mb-8 mt-15"},"Realm Photographs",-1)),be={class:"d-flex"},ye={class:"mb-5 text-primary"},xe={class:"text-subtitle-1 text-primary mb-2"},ke={class:"text-h5 text-paragraph text-primary"},Ve={class:"text-h5 text-paragraph mb-5"},Ce=L(()=>d("h4",{class:"text-h4 text-primary mb-1"},"Submitted by",-1)),he={class:"text-primary text-paragraph mb-5"},Se=L(()=>d("h5",{class:"text-h5 text-primary mb-1"},"Lore",-1)),we={class:"text-primary text-paragraph"},Ie={__name:"artifacts",setup(x){const O=J(),I=K();ve();const{photos:T}=_e(O.params.realm),r=R(!1),b=R([]),{resetForm:j}=Q(),{fields:k,update:D,swap:z,move:B}=ee("photos");ae(T,async o=>{o.forEach(t=>{b.value.push(t)}),j({values:{photos:b.value}})});const H=o=>{D(o,b.value[o])},X=async(o,t)=>{const{realmId:n,id:_,lore:y,hasSemiotic:V,useAsCoverImage:e,published:i}=o,C=N(I,"realms",n,"photographs",_);await de(C,{lore:y,useAsCoverImage:e,published:i,hasSemiotic:V||!1,order:t}).then(()=>{b.value[t]=o})},E=async()=>{const o=ie(I);k.value.forEach((t,n)=>{var y;const _=N(I,"realms",t.value.realmId,"photographs",t.value.id);(t.key!==n||((y=t==null?void 0:t.value)==null?void 0:y.order)<0)&&(console.log("updating"),o.update(_,{order:n}))}),await o.commit().then(()=>{r.value=!1})};return(o,t)=>{const n=G,_=W,y=Y,V=Z;return m(),c(V,{name:"realm-editing"},{default:l(()=>[ge,a(A,null,{default:l(()=>[a(u,{cols:"12",lg:"6"},{default:l(()=>[a(n,{class:"mr-2 mb-10",text:r.value?"Exit Rearrange Mode":"Enter Rearrange Mode",rounded:"","realm-icons":r.value?["close-circle"]:["check-circle"],warning:r.value,onClick:t[0]||(t[0]=e=>r.value=!r.value)},null,8,["text","realm-icons","warning"])]),_:1}),r.value?(m(),c(u,{key:0,cols:"12",lg:"6"},{default:l(()=>[a(n,{class:"mr-2 mb-10",text:"Save Order Of All Images",rounded:"","realm-icons":["floppy"],onClick:t[1]||(t[1]=e=>E())})]),_:1})):v("",!0)]),_:1}),a(re,{name:"list",tag:"div"},{default:l(()=>[(m(!0),le(te,null,se(p(k),(e,i)=>{var C;return m(),c(M,{variant:"outlined",class:oe(["pa-15 mb-8",(C=e==null?void 0:e.value)!=null&&C.hasSemiotic?"text-teal-accent-3":"text-primary"]),key:e==null?void 0:e.key},{default:l(()=>[a(A,null,{default:l(()=>[r.value?v("",!0):(m(),c(u,{key:0,cols:"12"},{default:l(()=>[d("div",be,[a(_,{class:"text-primary",name:`photos[${i}].hasSemiotic`,modelValue:e.value.hasSemiotic,"onUpdate:modelValue":s=>e.value.hasSemiotic=s,label:"Image Has Semiotic"},null,8,["name","modelValue","onUpdate:modelValue"]),a(_,{class:"text-primary",name:`photos[${i}].published`,modelValue:e.value.published,"onUpdate:modelValue":s=>e.value.published=s,label:"Is Published"},null,8,["name","modelValue","onUpdate:modelValue"]),a(_,{class:"text-primary",name:`photos[${i}].useAsCoverImage`,modelValue:e.value.useAsCoverImage,"onUpdate:modelValue":s=>e.value.useAsCoverImage=s,label:"Use As Cover Image"},null,8,["name","modelValue","onUpdate:modelValue"])])]),_:2},1024)),r.value?(m(),c(u,{key:1,cols:"12",lg:"1",class:"d-flex align-center flex-column justify-center"},{default:l(()=>[a(S,{class:"mb-2",variant:"plain",size:"x-large",disabled:e.isFirst,color:e.isFirst?"red":"primary",onClick:s=>p(B)(i,0)},{default:l(()=>[a(w,{icon:"mdi-format-vertical-align-top",size:"50px"})]),_:2},1032,["disabled","color","onClick"]),a(S,{class:"mb-5",variant:"plain",size:"x-large",disabled:e.isFirst,color:e.isFirst?"red":"primary",onClick:s=>p(z)(i,i-1)},{default:l(()=>[a(w,{icon:"mdi-arrow-up-bold-hexagon-outline",size:"50px"})]),_:2},1032,["disabled","color","onClick"]),d("p",ye,g(`${i+1}/${p(k).length} `),1),a(S,{class:"mb-2",variant:"plain",size:"x-large",disabled:e.isLast,color:e.isLast?"red":"primary",onClick:s=>p(z)(i,i+1)},{default:l(()=>[a(w,{icon:"mdi-arrow-down-bold-hexagon-outline",size:"50px"})]),_:2},1032,["disabled","color","onClick"]),a(S,{variant:"plain",size:"x-large",disabled:e.isLast,color:e.isLast?"red":"primary",onClick:s=>p(B)(i,p(k).length-1)},{default:l(()=>[a(w,{icon:"mdi-format-vertical-align-bottom",size:"50px"})]),_:2},1032,["disabled","color","onClick"])]),_:2},1024)):v("",!0),ne(a(u,{cols:"12",lg:"6"},{default:l(()=>{var s;return[d("p",xe,"Submitted by "+g(e.value.submittedBy),1),a(M,{color:"primary-darken-3",class:"mb-5 pa-3"},{default:l(()=>{var f,h,P;return[a(U,{class:"mr-2",color:(f=b.value[i])!=null&&f.published?"primary":"red",variant:"elevated"},{default:l(()=>{var F;return[$(g((F=b.value[i])!=null&&F.published?"Published":"Not Published"),1)]}),_:2},1032,["color"]),("useLastUpdated"in o?o.useLastUpdated:p(pe))((h=e==null?void 0:e.value)==null?void 0:h.submittedAt).isRecent.value?(m(),c(U,{key:0,color:"yellow",variant:"elevated",class:"mr-2"},{default:l(()=>[$(" Newly Published ")]),_:1})):v("",!0),(P=e==null?void 0:e.value)!=null&&P.hasSemiotic?(m(),c(U,{key:1,class:"mr-2",color:"teal-accent-3",variant:"elevated"},{default:l(()=>[$(" Has Semiotic ")]),_:1})):v("",!0)]}),_:2},1024),a(y,{name:`photos[${i}].lore`,label:"Image Lore",modelValue:e.value.lore,"onUpdate:modelValue":f=>e.value.lore=f,counter:"200",hint:"Should be musing information about the artifact. One or two short sentences or sentence fragments are appropriate."},null,8,["name","modelValue","onUpdate:modelValue"]),d("h5",ke,"Archived as #"+g(((s=e.value)==null?void 0:s.order)>=0?e.value.order:"X"),1)]}),_:2},1536),[[me,!r.value]]),a(u,{cols:"12",lg:"6"},{default:l(()=>{var s;return[a(fe,{class:"realmImage noCursor",contain:"",src:(s=e==null?void 0:e.value)==null?void 0:s.imageLink,"lazy-src":"/images/mocks/placeholder-wide.jpg",alt:"geometric shape"},null,8,["src"])]}),_:2},1024),r.value?(m(),c(u,{key:2,cols:"12",lg:"5",class:"d-flex flex-column justify-center"},{default:l(()=>{var s;return[d("h5",Ve,"Archived as #"+g(((s=e.value)==null?void 0:s.order)>=0?e.value.order:"X"),1),Ce,d("p",he,g(e.value.submittedBy),1),Se,d("p",we,g(e.value.lore),1)]}),_:2},1024)):v("",!0),r.value?v("",!0):(m(),c(u,{key:3,cols:"12",lg:"6",class:"d-lg-flex"},{default:l(()=>{var s,f;return[a(n,{class:"mr-2",color:"primary-darken-2",variant:"outlined",text:"Undo Edits",rounded:"","realm-icons":["undo"],onClick:h=>H(i)},null,8,["onClick"]),a(n,{class:"mr-2 mb-3",rounded:"",warning:(s=e==null?void 0:e.value)==null?void 0:s.hasSemiotic,text:(f=e==null?void 0:e.value)!=null&&f.hasSemiotic?"Save With Caution":"Save Changes","realm-icons":["floppy"],onClick:h=>X(e.value,i)},null,8,["warning","text","onClick"])]}),_:2},1024))]),_:2},1024)]),_:2},1032,["class"])}),128))]),_:1}),a(A,null,{default:l(()=>[a(u,{cols:"12",lg:"6"},{default:l(()=>[a(n,{class:"mr-2 mb-10",text:r.value?"Exit Rearrange Mode":"Enter Rearrange Mode",rounded:"","realm-icons":r.value?["close-circle"]:["check-circle"],warning:r.value,onClick:t[2]||(t[2]=e=>r.value=!r.value)},null,8,["text","realm-icons","warning"])]),_:1}),r.value?(m(),c(u,{key:0,cols:"12",lg:"6"},{default:l(()=>[a(n,{class:"mr-2 mb-10",text:"Save Order Of All Images",rounded:"","realm-icons":["floppy"],onClick:t[3]||(t[3]=e=>E())})]),_:1})):v("",!0)]),_:1})]),_:1})}}},ca=q(Ie,[["__scopeId","data-v-6d3a207c"]]);export{ca as default};
