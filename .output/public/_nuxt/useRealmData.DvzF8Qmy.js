import{u as l}from"./useSiteStore.Cb1hoYNs.js";import{b9 as D,r as o,ba as P,d as k,cl as w,ak as m,am as A,an as I,ao as v,bc as C,bb as p}from"./entry.ChAOt23L.js";const q=D({apiKey:"AIzaSyBveK6gIB_9MdjUlyi70KOyCo-dMO2yKHY",authDomain:"crickburrowarchives.firebaseapp.com",projectId:"crickburrowarchives",storageBucket:"crickburrowarchives.appspot.com",messagingSenderId:"708349315619",appId:"1:708349315619:web:5a599bfa7961f0bf217f96",measurementId:"G-CLXB8V1MH8"}),i=o({}),u=o(""),h=o([]),b=o(""),c=o([]),L=o(""),f=o([]),g=o(""),d=P(q),y=a=>{l().$patch({currentSound:a})};async function R(a,t){const s=l(),e=k(d,"realms",a);if(Object.keys(s==null?void 0:s.realmData).includes(a)){if(i.value=s.realmData[a],t!=null&&t.noMusic)return;y(s.realmData[a].audioLink);return}try{const r=await w(e);if(r.exists()){if(i.value={...r.data(),realmSigil:r.data().sigilImageLink?[new File([r.data().sigilImageLink],`${r.data().slug}.png`)]:null,realmAudio:r.data().audioLink?[new File([r.data().audioLink],`${r.data().slug}.mp3`)]:null},s.realmData[a]=i.value,t!=null&&t.noMusic)return;y(i.value.audioLink)}}catch(r){r&&(u.value=u)}}async function E(){const a=l(),t=m(I(d,"photographs"),A("useAsCoverImage","==",!0));if(a!=null&&a.realmCoverPhotos.length){h.value=a.realmCoverPhotos;return}try{(await v(t)).forEach(e=>{const{realmId:r,imageLink:n}=e.data();h.value.push({realmId:r,imageLink:n})}),a.realmCoverPhotos={...h.value}}catch(s){s&&(u.value=u)}}async function F(a){const t=l(),s=m(p(d,"realms",a,"photographs"),C("order"));if(Object.keys(t==null?void 0:t.realmPhotosData).includes(a)){c.value=t.realmPhotosData[a];return}try{const e=await v(s);c.value=[],e.forEach(r=>{const n=r.data();c.value.push({...n,id:r.id})}),t.realmPhotosData[a]=c.value}catch(e){e&&(console.log(e),b.value=e)}}async function M(a){const t=l(),s=m(p(d,"realms",a,"artifacts"));if(Object.keys(t==null?void 0:t.realmArtifacts).includes(a)){f.value=t.realmArtifacts[a];return}try{const e=v(s);f.value=[],e.forEach(r=>{const n=r.data();f.value.push({...n,id:r.id})}),t.realmArtifacts[a]=c.value}catch(e){e&&(console.log(e),g.value=e)}}async function B(a,t={noMusic:!1}){return await R(a,t),{realmData:i,realmError:u}}async function K(){return await E(),{coverPhotosData:h,coverPhotosError:b}}async function x(a){return await F(a),{realmPhotosData:c,realmPhotosError:L}}async function $(a){return await M(a),{artifactsData:f,artifactsError:g}}export{$ as a,x as b,K as c,B as u};
