import{u as h}from"./sL6slM7m.js";import{co as A,r,cp as q,d as I,ct as C,al as v,an as P,ao as E,ap as y,cr as g,cq as p,D as L}from"./DAMA_ESs.js";const R=A({apiKey:"AIzaSyBveK6gIB_9MdjUlyi70KOyCo-dMO2yKHY",authDomain:"crickburrowarchives.firebaseapp.com",projectId:"crickburrowarchives",storageBucket:"crickburrowarchives.appspot.com",messagingSenderId:"708349315619",appId:"1:708349315619:web:5a599bfa7961f0bf217f96",measurementId:"G-CLXB8V1MH8"}),i=r({}),l=r(""),d=r([]),b=r(""),n=r([]),j=r(""),m=r([]),k=r(""),u=r([]),w=r(""),f=q(R),D=a=>{L().$patch(s=>{s.currentSound={soundLink:a}})};async function O(a,t){const s=h(),o=I(f,"realms",a);if(Object.keys(s==null?void 0:s.realmData).includes(a)){if(i.value=s.realmData[a],t!=null&&t.noMusic)return;D(s.realmData[a].audioLink);return}try{const e=await C(o);if(e.exists()){if(i.value={...e.data(),realmSigil:e.data().sigilImageLink?[new File([e.data().sigilImageLink],`${e.data().slug}.png`)]:null,realmAudio:e.data().audioLink?[new File([e.data().audioLink],`${e.data().slug}.mp3`)]:null},s.realmData[a]=i.value,t!=null&&t.noMusic)return;D(i.value.audioLink)}}catch(e){e&&(l.value=l)}}async function F(){const a=h(),t=v(E(f,"photographs"),P("useAsCoverImage","==",!0));try{if(Object.entries(a==null?void 0:a.realmCoverPhotos).length){d.value=Object.values(a==null?void 0:a.realmCoverPhotos);return}(await y(t)).forEach(o=>{const{realmId:e,imageLink:c}=o.data();d.value.push({realmId:e,imageLink:c})}),a.realmCoverPhotos={...d.value}}catch(s){s&&(l.value=l)}}async function M(a){const t=h(),s=v(p(f,"realms",a,"photographs"),g("order"));if(Object.keys(t==null?void 0:t.realmPhotosData).includes(a)){n.value=t.realmPhotosData[a];return}try{const o=await y(s);n.value=[],o.forEach(e=>{const c=e.data();n.value.push({...c,id:e.id})}),t.realmPhotosData[a]=n.value}catch(o){o&&(console.log(o),b.value=o)}}async function B(a){const t=h(),s=v(p(f,"realms",a,"photographs"),g("order"),P("hasSemiotic","==",!0));if(Object.keys(t==null?void 0:t.semioticsData).includes(a)){u.value=t.semioticsData[a];return}try{const o=await y(s);u.value=[],o.forEach(e=>{const c=e.data();u.value.push({...c,id:e.id})}),t.semioticsData[a]=u.value}catch(o){o&&(console.log(o),w.value=o)}}async function K(a){const t=h(),s=v(p(f,"realms",a,"artifacts"));if(Object.keys(t==null?void 0:t.realmArtifacts).includes(a)){m.value=t.realmArtifacts[a];return}try{const o=y(s);m.value=[],o.forEach(e=>{const c=e.data();m.value.push({...c,id:e.id})}),t.realmArtifacts[a]=n.value}catch(o){o&&(console.log(o),k.value=o)}}async function z(a,t={noMusic:!1}){return await O(a,t),{realmData:i,realmError:l}}async function H(){return await F(),{coverPhotosData:d,coverPhotosError:b}}async function _(a){return await M(a),{realmPhotosData:n,realmPhotosError:j}}async function G(a){return await K(a),{artifactsData:m,artifactsError:k}}async function S(a){return await B(a),{semioticsData:u,semioticsError:w}}export{G as a,_ as b,S as c,H as d,z as u};
