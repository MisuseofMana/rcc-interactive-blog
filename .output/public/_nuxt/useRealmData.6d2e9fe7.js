import{u as g}from"./useSiteStore.bfcdeead.js";import{bc as D,r as o,bd as P,x as k,bg as w,a0 as d,a2 as A,a3 as I,a4 as v,bf as C,be as y}from"./entry.af4b25f0.js";const q=D({apiKey:"AIzaSyBveK6gIB_9MdjUlyi70KOyCo-dMO2yKHY",authDomain:"crickburrowarchives.firebaseapp.com",projectId:"crickburrowarchives",storageBucket:"crickburrowarchives.appspot.com",messagingSenderId:"708349315619",appId:"1:708349315619:web:5a599bfa7961f0bf217f96",measurementId:"G-CLXB8V1MH8"}),u=o({}),i=o(""),l=o([]),p=o(""),c=o([]),L=o(""),h=o([]),b=o(""),t=g(),f=P(q),m=a=>{t.$patch({currentSound:a})};async function E(a,e){const s=k(f,"realms",a);if(Object.keys(t==null?void 0:t.realmData).includes(a)){if(u.value=t.realmData[a],e!=null&&e.noMusic)return;m(t.realmData[a].audioLink);return}try{const r=await w(s);if(r.exists()){if(u.value={...r.data(),realmSigil:r.data().sigilImageLink?[new File([r.data().sigilImageLink],`${r.data().slug}.png`)]:null,realmAudio:r.data().audioLink?[new File([r.data().audioLink],`${r.data().slug}.mp3`)]:null},t.realmData[a]=u.value,e!=null&&e.noMusic)return;m(u.value.audioLink)}}catch(r){r&&(i.value=i)}}async function R(){const a=d(I(f,"photographs"),A("useAsCoverImage","==",!0));if(t!=null&&t.realmCoverPhotos.length){l.value=t.realmCoverPhotos;return}try{(await v(a)).forEach(s=>{const{realmId:r,imageLink:n}=s.data();l.value.push({realmId:r,imageLink:n})}),t.realmCoverPhotos={...l.value}}catch(e){e&&(i.value=i)}}async function F(a){const e=d(y(f,"realms",a,"photographs"),C("order"));if(Object.keys(t==null?void 0:t.realmPhotosData).includes(a)){c.value=t.realmPhotosData[a];return}try{const s=await v(e);c.value=[],s.forEach(r=>{const n=r.data();c.value.push({...n,id:r.id})}),t.realmPhotosData[a]=c.value}catch(s){s&&(console.log(s),p.value=s)}}async function M(a){const e=d(y(f,"realms",a,"artifacts"));if(Object.keys(t==null?void 0:t.realmArtifacts).includes(a)){h.value=t.realmArtifacts[a];return}try{const s=v(e);h.value=[],s.forEach(r=>{const n=r.data();h.value.push({...n,id:r.id})}),t.realmArtifacts[a]=c.value}catch(s){s&&(console.log(s),b.value=s)}}async function B(a,e={noMusic:!1}){return await E(a,e),{realmData:u,realmError:i}}async function K(){return await R(),{coverPhotosData:l,coverPhotosError:p}}async function x(a){return await F(a),{realmPhotosData:c,realmPhotosError:L}}async function $(a){return await M(a),{artifactsData:h,artifactsError:b}}export{$ as a,x as b,K as c,B as u};
