import{_ as q}from"./backButton.b4a42b8e.js";import J from"./CBToggleSwitch.58227a55.js";import K from"./CBTextArea.9d340382.js";import{_ as Q}from"./layout.11a375a8.js";import{_ as ee,E as ae,b6 as le,m as te,r as z,k as se,f as re,Y as oe,o as n,c as u,w as l,a,g as c,a5 as ie,b as B,h as ne,u as p,F as me,d as I,an as ue,z as j,n as ce,e as v,t as g,C as de,D as ve,p as pe,i as fe,Z as _e}from"./entry.94ffdeeb.js";import{a as ge}from"./useSiteStore.7e6abfbd.js";import{b as be}from"./useRealmData.f000b3e2.js";import{V as E,a as d}from"./VRow.874663fa.js";import{V as ye}from"./VSnackbar.f99cdf2a.js";import{V as x}from"./VBtn.d2531af0.js";import{V as xe}from"./VContainer.26342d42.js";import{V as D}from"./VCard.9eec5110.js";import{V as U}from"./VIcon.a89c1bf3.js";import{V as R}from"./VChip.c096698a.js";import{V as ke}from"./VImg.9336a433.js";import"./VSelectionControl.dc270e61.js";import"./density.5a2b29f1.js";import"./useRender.ee02d324.js";import"./index.5bd91e98.js";import"./color.08edc865.js";import"./VInput.6e31d692.js";import"./index.108b6c93.js";import"./transition.7408c173.js";import"./loader.0e188cc9.js";import"./VProgressLinear.7e39016e.js";import"./rounded.a3340ae4.js";import"./tag.6e0eec08.js";import"./VProgressCircular.6669da86.js";import"./resizeObserver.16ca977f.js";/* empty css                   */import"./forwardRefs.14bdb9d9.js";import"./index.66b8fb70.js";import"./router.12029284.js";import"./position.048a6b63.js";import"./VOverlay.a8c9058d.js";import"./dimensions.2a8a239a.js";import"./hydration.f2ecb7c8.js";import"./group.e7d6c6fc.js";import"./createSimpleFunctional.433ad74c.js";import"./VAvatar.7d2681a0.js";const A=k=>(pe("data-v-c3a96300"),k=k(),fe(),k),Ve=A(()=>v("h4",{class:"text-h4 mb-8 mt-15"},"Realm Photographs",-1)),Ce={class:"d-flex"},he={class:"mb-5 text-primary"},Se={class:"text-subtitle-1 text-primary mb-2"},we={key:0,class:"text-h5 text-paragraph text-primary"},$e={key:1,class:"text-h5 text-paragraph text-primary"},Ie={class:"text-h5 text-paragraph mb-5"},Ue=A(()=>v("h4",{class:"text-h4 text-primary mb-1"},"Submitted by",-1)),Ae={class:"text-primary text-paragraph mb-5"},Le=A(()=>v("h5",{class:"text-h5 text-primary mb-1"},"Lore",-1)),ze={class:"text-primary text-paragraph"},Be=A(()=>v("p",{class:"text-primary text-body-2"}," Upload Succeeded ",-1)),Ee={__name:"photographs",setup(k){const H=ae(),X=le(),L=te(),r=z(!1),f=z([]),V=z(!1),{resetForm:G}=se();re(()=>{be(H.params.realm).then(({realmPhotosData:i})=>{i.value.forEach(t=>{f.value.push(t)}),f.value=i.value,G({values:{photos:f.value}})})});const{fields:C,update:W,swap:F,move:P}=oe("photos"),Y=i=>{W(i,f.value[i])},Z=async(i,t)=>{const{realmId:m,id:_,lore:b,hasSemiotic:h,useAsCoverImage:e,published:o}=i,S=j(L,"realms",m,"photographs",_);await _e(S,{lore:b,useAsCoverImage:e,published:o,hasSemiotic:h||!1,order:t}).then(()=>{f.value[t]=i,V.value=!0})},N=async()=>{const i=ue(L);C.value.forEach((t,m)=>{var b;const _=j(L,"realms",t.value.realmId,"photographs",t.value.id);(t.key!==m||((b=t==null?void 0:t.value)==null?void 0:b.order)===null)&&i.update(_,{order:m})}),await i.commit().then(()=>{r.value=!1}),X.go()};return(i,t)=>{const m=q,_=J,b=K,h=Q;return n(),u(h,{name:"realm-editing"},{default:l(()=>[a(xe,null,{default:l(()=>[Ve,a(E,null,{default:l(()=>[a(d,{cols:"12",lg:"6"},{default:l(()=>[a(m,{class:"mr-2 mb-10",text:r.value?"Exit Rearrange Mode":"Enter Rearrange Mode",rounded:"","realm-icons":r.value?["close-circle"]:["check-circle"],warning:r.value,onClick:t[0]||(t[0]=e=>r.value=!r.value)},null,8,["text","realm-icons","warning"])]),_:1}),r.value?(n(),u(d,{key:0,cols:"12",lg:"6"},{default:l(()=>[a(m,{class:"mr-2 mb-10",text:"Save Order Of All Images",rounded:"","realm-icons":["floppy"],onClick:t[1]||(t[1]=e=>N())})]),_:1})):c("",!0)]),_:1}),a(ie,{name:"list",tag:"div"},{default:l(()=>[(n(!0),B(me,null,ne(p(C),(e,o)=>{var S;return n(),u(D,{variant:"outlined",class:ce(["pa-15 mb-8",(S=e==null?void 0:e.value)!=null&&S.hasSemiotic?"text-teal-accent-3":"text-primary"]),key:e==null?void 0:e.key},{default:l(()=>[a(E,null,{default:l(()=>[r.value?c("",!0):(n(),u(d,{key:0,cols:"12"},{default:l(()=>[v("div",Ce,[a(_,{class:"text-primary",name:`photos[${o}].hasSemiotic`,modelValue:e.value.hasSemiotic,"onUpdate:modelValue":s=>e.value.hasSemiotic=s,label:"Image Has Semiotic"},null,8,["name","modelValue","onUpdate:modelValue"]),a(_,{class:"text-primary",name:`photos[${o}].published`,modelValue:e.value.published,"onUpdate:modelValue":s=>e.value.published=s,label:"Is Published"},null,8,["name","modelValue","onUpdate:modelValue"]),a(_,{class:"text-primary",name:`photos[${o}].useAsCoverImage`,modelValue:e.value.useAsCoverImage,"onUpdate:modelValue":s=>e.value.useAsCoverImage=s,label:"Use As Cover Image"},null,8,["name","modelValue","onUpdate:modelValue"])])]),_:2},1024)),r.value?(n(),u(d,{key:1,cols:"12",lg:"1",class:"d-flex align-center flex-column justify-center"},{default:l(()=>[a(x,{class:"mb-2",variant:"plain",size:"x-large",disabled:e.isFirst,color:e.isFirst?"red":"primary",onClick:s=>p(P)(o,0)},{default:l(()=>[a(U,{icon:"mdi-format-vertical-align-top",size:"50px"})]),_:2},1032,["disabled","color","onClick"]),a(x,{class:"mb-5",variant:"plain",size:"x-large",disabled:e.isFirst,color:e.isFirst?"red":"primary",onClick:s=>p(F)(o,o-1)},{default:l(()=>[a(U,{icon:"mdi-arrow-up-bold-hexagon-outline",size:"50px"})]),_:2},1032,["disabled","color","onClick"]),v("p",he,g(`${o+1}/${p(C).length} `),1),a(x,{class:"mb-2",variant:"plain",size:"x-large",disabled:e.isLast,color:e.isLast?"red":"primary",onClick:s=>p(F)(o,o+1)},{default:l(()=>[a(U,{icon:"mdi-arrow-down-bold-hexagon-outline",size:"50px"})]),_:2},1032,["disabled","color","onClick"]),a(x,{variant:"plain",size:"x-large",disabled:e.isLast,color:e.isLast?"red":"primary",onClick:s=>p(P)(o,p(C).length-1)},{default:l(()=>[a(U,{icon:"mdi-format-vertical-align-bottom",size:"50px"})]),_:2},1032,["disabled","color","onClick"])]),_:2},1024)):c("",!0),de(a(d,{cols:"12",lg:"6"},{default:l(()=>{var s,y,w;return[v("p",Se,"Submitted by "+g(e.value.submittedBy),1),a(D,{color:"primary-darken-3",class:"mb-5 pa-3"},{default:l(()=>{var $,M,O;return[a(R,{class:"mr-2",color:($=f.value[o])!=null&&$.published?"primary":"red",variant:"elevated"},{default:l(()=>{var T;return[I(g((T=f.value[o])!=null&&T.published?"Published":"Not Published"),1)]}),_:2},1032,["color"]),("useLastUpdated"in i?i.useLastUpdated:p(ge))((M=e==null?void 0:e.value)==null?void 0:M.submittedAt).isRecent.value?(n(),u(R,{key:0,color:"yellow",variant:"elevated",class:"mr-2"},{default:l(()=>[I(" Newly Published ")]),_:1})):c("",!0),(O=e==null?void 0:e.value)!=null&&O.hasSemiotic?(n(),u(R,{key:1,class:"mr-2",color:"teal-accent-3",variant:"elevated"},{default:l(()=>[I(" Has Semiotic ")]),_:1})):c("",!0)]}),_:2},1024),a(b,{name:`photos[${o}].lore`,label:"Image Lore",modelValue:e.value.lore,"onUpdate:modelValue":$=>e.value.lore=$,counter:"200",hint:"Should be musing information about the artifact. One or two short sentences or sentence fragments are appropriate."},null,8,["name","modelValue","onUpdate:modelValue"]),((s=e.value)==null?void 0:s.order)!=null?(n(),B("h5",we,"Archived as #"+g(((y=e.value)==null?void 0:y.order)>=0?e.value.order:"X"),1)):c("",!0),((w=e.value)==null?void 0:w.order)===null?(n(),B("h5",$e,"No Order Recorded")):c("",!0)]}),_:2},1536),[[ve,!r.value]]),a(d,{cols:"12",lg:"6"},{default:l(()=>{var s;return[a(ke,{class:"realmImage noCursor",contain:"",src:(s=e==null?void 0:e.value)==null?void 0:s.imageLink,"lazy-src":"/images/mocks/placeholder-wide.jpg",alt:"geometric shape"},null,8,["src"])]}),_:2},1024),r.value?(n(),u(d,{key:2,cols:"12",lg:"5",class:"d-flex flex-column justify-center"},{default:l(()=>{var s;return[v("h5",Ie,"Archived as #"+g(((s=e.value)==null?void 0:s.order)>=0?e.value.order:"X"),1),Ue,v("p",Ae,g(e.value.submittedBy),1),Le,v("p",ze,g(e.value.lore),1)]}),_:2},1024)):c("",!0),r.value?c("",!0):(n(),u(d,{key:3,cols:"12",lg:"6",class:"d-lg-flex"},{default:l(()=>{var s,y;return[a(m,{class:"mr-2",color:"primary-darken-2",variant:"outlined",text:"Undo Edits",rounded:"","realm-icons":["undo"],onClick:w=>Y(o)},null,8,["onClick"]),a(m,{class:"mr-2 mb-3",rounded:"",warning:(s=e==null?void 0:e.value)==null?void 0:s.hasSemiotic,text:(y=e==null?void 0:e.value)!=null&&y.hasSemiotic?"Save With Caution":"Save Changes","realm-icons":["floppy"],onClick:w=>Z(e.value,o)},null,8,["warning","text","onClick"])]}),_:2},1024))]),_:2},1024)]),_:2},1032,["class"])}),128))]),_:1}),a(E,null,{default:l(()=>[a(d,{cols:"12",lg:"6"},{default:l(()=>[a(m,{class:"mr-2 mb-10",text:r.value?"Exit Rearrange Mode":"Enter Rearrange Mode",rounded:"","realm-icons":r.value?["close-circle"]:["check-circle"],warning:r.value,onClick:t[2]||(t[2]=e=>r.value=!r.value)},null,8,["text","realm-icons","warning"])]),_:1}),r.value?(n(),u(d,{key:0,cols:"12",lg:"6"},{default:l(()=>[a(m,{class:"mr-2 mb-10",text:"Save Order Of All Images",rounded:"","realm-icons":["floppy"],onClick:t[3]||(t[3]=e=>N())})]),_:1})):c("",!0)]),_:1}),a(ye,{modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e),timer:"",timeout:"1500"},{actions:l(()=>[a(x,{color:"primary",variant:"text",onClick:t[4]||(t[4]=e=>V.value=!1)},{default:l(()=>[I(" Close ")]),_:1})]),default:l(()=>[Be]),_:1},8,["modelValue"])]),_:1})]),_:1})}}},ka=ee(Ee,[["__scopeId","data-v-c3a96300"]]);export{ka as default};
